<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedulator - Main</title>

    <link rel="stylesheet" href="../coreui/simplebar.css">
    <link href="../coreui/style.css" rel="stylesheet">
    <link href="../coreui/examples.css" rel="stylesheet">
    <script type="text/javascript" src="../vendor/parse.min.js"></script>
    <script type="text/javascript" src="../parseController.js"></script>
    <script type="text/javascript" src="../vendor/jquery3.min.js"></script>
</head>

<body class="dark-theme">
    <header class="header header-sticky mb-4">
        <div class="container-fluid">
            <button id="newschedule" class="btn btn-dark" type="button">New Schedule</button>
            <ul class="header-nav me-4">
                <li class="nav-item dropdown d-flex align-items-center">
                    <span id="name"></span>
                    <a id="logout" class="nav-link py-0" data-coreui-toggle="dropdown" role="button"
                        aria-haspopup="true" aria-expanded="false">
                        <div class="avatar avatar-md"><img class="avatar-img"
                                src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="user@email.com"></div>
                    </a>
                </li>
            </ul>
        </div>
    </header>
    <div class="body flex-grow-1 px-3 container-lg">
        <div class="card mb-4">
            <div class="card-header">Your Schedules</span></div>
            <div class="card-body">
                <div id="schedules" class="row"></div>
            </div>
        </div>
    </div>

    <script>
        const user = getCurrentUser();
        const schedules = [1,2,3,4,5]
        function backToLogin() {
            window.location.href = "../";
        }
        if (!user) {
            backToLogin();
        }
        $("#name").text(`${user.get("name")}`);
        $("#logout").click(() => {
            logOut(() => {
                backToLogin();
            }, (e) => {
                alert(e.message);
            });
        });
        $("#newschedule").click(() => {
            window.location.href = "../scheduler";
        });
        const cards = [];
        schedules.forEach((schedule) => {
            cards.push(
                `
                <div class="col-lg-4 col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Card title ${schedule}</h5>
                        <p class="card-text">Some quick example text to build on the card title and make up
                            the
                            bulk of the card's content.</p>
                        <div class="btn-toolbar justify-content-between" role="toolbar"
                            aria-label="Toolbar with button groups">
                            <div class="btn-group" role="group" aria-label="First group">
                                <button class="btn btn-primary" type="button">Open</button>
                            </div>
                            <div class="input-group">
                                <button class="btn btn-danger" type="button">Remove</button>
                            </div>
                        </div>
                    </div>
                </div>
                </div>`
            )
        });
        $("#schedules").append(cards)
    </script>
</body>

</html>